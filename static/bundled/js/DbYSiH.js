import{u as e,o as t,d as n,f as r,i,g as s,h as o,b as a,s as c,F as l,t as d,j as u,$ as f,p as g,q as p,r as y,c as h,v,w as m,l as b,x as w,n as A,e as O,S as j,_ as x}from"./main.js";var S=d("<div class=collection>"),I=d("<img>");function k(e,t){return Math.floor(Math.random()*(t-e+1))+e}function $(d){const u=Array(d.ijs.length),[f,{setIndex:g}]=e(),p=e=>{d.isAnimating()||(g(e),d.setIsOpen(!0))};return t((()=>{u.forEach(((e,t)=>{var n,r;t<5&&(e.src=e.dataset.src),e.addEventListener("click",(()=>{p(t)}),{passive:!0}),e.addEventListener("keydown",(()=>{p(t)}),{passive:!0}),n=e,r=e=>!(e.intersectionRatio<=0||(t+5<u.length&&(u[t+5].src=u[t+5].dataset.src),0)),new IntersectionObserver(((e,t)=>{for(const n of e)if(r(n)){t.disconnect();break}})).observe(n)}))})),n(r((()=>{d.isOpen()}),(()=>{d.isOpen()||u[f().index].scrollIntoView({behavior:"auto",block:"center"})}),{defer:!0})),y=S(),i(y,s(l,{get each(){return d.ijs},children:(e,t)=>(()=>{var n=I();n.$$keydown=()=>{p(t())},n.$$click=()=>{p(t())};var r=u[t()];return"function"==typeof r?o(r,n):u[t()]=n,a((r=>{var i=20*e.loImgH,s=20*e.loImgW,o=e.loUrl,a=e.alt,l=`translate3d(${0!==t()?k(-25,25):0}%, ${0!==t()?k(-35,35):0}%, 0)`;return i!==r.e&&c(n,"height",r.e=i),s!==r.t&&c(n,"width",r.t=s),o!==r.a&&c(n,"data-src",r.a=o),a!==r.o&&c(n,"alt",r.o=a),l!==r.i&&(null!=(r.i=l)?n.style.setProperty("transform",l):n.style.removeProperty("transform")),r}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),n})()})),y;var y}u(["click","keydown"]);const P=Symbol("store-raw"),T=Symbol("store-node"),C=Symbol("store-has"),_=Symbol("store-self");function L(e){let t=e[f];if(!t&&(Object.defineProperty(e,f,{value:t=new Proxy(e,V)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){const s=n[i];r[s].get&&Object.defineProperty(e,s,{enumerable:r[s].enumerable,get:r[s].get.bind(t)})}}return t}function E(e){let t;return null!=e&&"object"==typeof e&&(e[f]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function D(e,t=new Set){let n,r,i,s;if(n=null!=e&&e[P])return n;if(!E(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,s=e.length;n<s;n++)i=e[n],(r=D(i,t))!==i&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let a=0,c=n.length;a<c;a++)s=n[a],o[s].get||(i=e[s],(r=D(i,t))!==i&&(e[s]=r))}return e}function M(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function R(e,t,n){if(e[t])return e[t];const[r,i]=h(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function U(e){p()&&R(M(e,T),_)()}const V={get(e,t,n){if(t===P)return e;if(t===f)return n;if(t===g)return U(e),n;const r=M(e,T),i=r[t];let s=i?i():e[t];if(t===T||t===C||"__proto__"===t)return s;if(!i){const n=Object.getOwnPropertyDescriptor(e,t);!p()||"function"==typeof s&&!e.hasOwnProperty(t)||n&&n.get||(s=R(r,t,s)())}return E(s)?L(s):s},has:(e,t)=>t===P||t===f||t===g||t===T||t===C||"__proto__"===t||(p()&&R(M(e,C),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return U(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.get&&n.configurable&&t!==f&&t!==T?(delete n.value,delete n.writable,n.get=()=>e[f][t],n):n}};function q(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],s=e.length;void 0===n?(delete e[t],e[C]&&e[C][t]&&void 0!==i&&e[C][t].$()):(e[t]=n,e[C]&&e[C][t]&&void 0===i&&e[C][t].$());let o,a=M(e,T);if((o=R(a,t,i))&&o.$((()=>n)),Array.isArray(e)&&e.length!==s){for(let t=e.length;t<s;t++)(o=a[t])&&o.$();(o=R(a,"length",s))&&o.$(e.length)}(o=a[_])&&o.$()}function F(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];q(e,i,t[i])}}function H(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const s=typeof r,o=Array.isArray(e);if(Array.isArray(r)){for(let i=0;i<r.length;i++)H(e,[r[i]].concat(t),n);return}if(o&&"function"===s){for(let i=0;i<e.length;i++)r(e[i],i)&&H(e,[i].concat(t),n);return}if(o&&"object"===s){const{from:i=0,to:s=e.length-1,by:o=1}=r;for(let r=i;r<=s;r+=o)H(e,[r].concat(t),n);return}if(t.length>1)return void H(e[r],t,[r].concat(n));i=e[r],n=[r].concat(n)}let s=t[0];"function"==typeof s&&(s=s(i,n),s===i)||void 0===r&&null==s||(s=D(s),void 0===r||E(i)&&E(s)&&!Array.isArray(s)?F(i,s):q(e,r,s))}function z(...[e,t]){const n=D(e||{}),r=Array.isArray(n);return[L(n),function(...e){y((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=D(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&q(e,n,r)}q(e,"length",r)}else F(e,t)}(n,e[0]):H(n,e)}))}]}function B(){const{isAndroid:e,isAndroidChrome:t}=function(){const e=navigator.userAgent.toLowerCase(),t=/android/i.test(e),n=/chrome/i.test(e)&&!/edge|edg/i.test(e);return{isAndroid:t,isChrome:n,isAndroidChrome:t&&n}}();e&&(document.body.classList.add("android-device"),t)&&(document.body.classList.add("android-chrome"),document.querySelectorAll(".animate").forEach((e=>{e instanceof HTMLElement&&(e.style.transform="translate3d(0, 0, 0)",e.style.willChange="transform, opacity",e.style.webkitBackfaceVisibility="hidden",e.style.backfaceVisibility="hidden",e.style.webkitPerspective="1000",e.style.perspective="1000")})))}"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",B);var K=d("<div class=slideContainer><img><div class=loadingText>");function W(n){let r,s,a;const[c]=e();return t((()=>{b().then((e=>{a=e,null==r||r.addEventListener("load",(()=>{w(r),w(s);const e=B();c().index!==n.ij.index?(a.set(r,{opacity:1}),a.set(s,{opacity:0})):(a.to(r,e),a.to(s,{opacity:0,duration:.5,ease:"power3.in"}))}),{once:!0,passive:!0})})).catch((e=>{console.log(e)}))})),u=(d=(l=K()).firstChild).nextSibling,"function"==typeof r?o(r,d):r=d,v(d,m((()=>n.load&&{src:n.ij.hiUrl}),{get height(){return n.ij.hiImgH},get width(){return n.ij.hiImgW},get"data-src"(){return n.ij.hiUrl},get alt(){return n.ij.alt},style:{opacity:0}}),!1),"function"==typeof s?o(s,u):s=u,i(u,(()=>n.loadingText)),l;var l,d,u}var G=d("<div class=nav><div><span class=num></span><span class=num></span><span class=num></span><span class=num></span><span>/</span><span class=num></span><span class=num></span><span class=num></span><span class=num></span></div><div>");function J(e){return e.charAt(0).toUpperCase()+e.slice(1)}function N(t){const[n]=e(),r=A((()=>O(n().index+1))),s=A((()=>O(n().length))),o=()=>{t.isAnimating()||t.setIsOpen(!1)};return h=(y=(p=(g=(f=(u=(d=(l=(c=(a=G()).firstChild).firstChild).nextSibling).nextSibling).nextSibling).nextSibling.nextSibling).nextSibling).nextSibling).nextSibling,v=c.nextSibling,i(l,(()=>r()[0])),i(d,(()=>r()[1])),i(u,(()=>r()[2])),i(f,(()=>r()[3])),i(g,(()=>s()[0])),i(p,(()=>s()[1])),i(y,(()=>s()[2])),i(h,(()=>s()[3])),v.$$keydown=o,v.$$click=o,i(v,(()=>J(t.closeText))),a;var a,c,l,d,u,f,g,p,y,h,v}u(["click","keydown"]);var Q=d("<div class=gallery><div class=galleryInner><div class=swiper-wrapper>"),X=d("<div class=curtain>"),Y=d("<div class=swiper-slide>");function Z(a){let c,d,u,f,g;const p=J(a.loadingText);let y=-1,v=!1,m="none";const[A,{setIndex:O}]=e(),[S,I]=h(!1),[k,$]=z(Array(a.ijs.length).fill(!1));return t((()=>{window.addEventListener("touchstart",(()=>{b().then((e=>{c=e})).catch((e=>{console.log(e)})),async function(){return(await x((()=>import("./r1aa2g.js")),[])).Swiper}().then((e=>{w(g),d=new e(g,{spaceBetween:20}),d.on("slideChange",(({realIndex:e})=>{O(e)}))})).catch((e=>{console.log(e)})),I(!0)}),{once:!0,passive:!0}),v=!0})),n(r((()=>{A()}),(()=>{const e=A().index;var t;e!==y&&(m=-1===y?"none":e<y?"prev":e>y?"next":"none",t=e,(()=>{let e=[];const t=A(),n=t.index,r=Math.min(n+1,t.length-1),i=Math.max(n-1,0);switch(m){case"next":e=[r];break;case"prev":e=[i];break;case"none":e=[n,r,i]}var s;$((s=e).length<2?s:[...new Set(s)],!0)})(),d.slideTo(t,0),y=e)}))),n(r((()=>{a.isOpen()}),(()=>{a.isAnimating()||(a.isOpen()?(()=>{if(!S()||!v)return;a.setIsAnimating(!0),w(u),w(f);const e=B();c.to(u,e);const t=B();c.to(f,t),setTimeout((()=>{a.setScrollable(!1),a.setIsAnimating(!1)}),1200)})():(()=>{a.setIsAnimating(!0),w(f),w(u);const e=B();c.to(f,e),c.to(u,{opacity:0,duration:1.2,delay:.4}),setTimeout((()=>{a.setScrollable(!0),a.setIsAnimating(!1),y=-1}),1400)})())}),{defer:!0})),[(P=Q(),T=P.firstChild,C=T.firstChild,"function"==typeof f?o(f,P):f=P,"function"==typeof g?o(g,T):g=T,i(C,s(j,{get when(){return S()},get children(){return s(l,{get each(){return a.ijs},children:(e,t)=>{return n=Y(),i(n,s(W,{get load(){return k[t()]},ij:e,loadingText:p})),n;var n}})}})),i(P,s(N,{get closeText(){return a.closeText},get isAnimating(){return a.isAnimating},get setIsOpen(){return a.setIsOpen}}),null),P),(_=X(),"function"==typeof u?o(u,_):u=_,_)];var P,T,C,_}function ee(e){const[t,n]=h(!1),[r,i]=h(!1);return s(j,{get when(){return e.ijs.length>0},get children(){return[s($,{get ijs(){return e.ijs},isAnimating:r,isOpen:t,setIsOpen:n}),s(Z,{get ijs(){return e.ijs},get closeText(){return e.closeText},get loadingText(){return e.loadingText},isAnimating:r,setIsAnimating:i,isOpen:t,setIsOpen:n,get setScrollable(){return e.setScrollable}})]}})}export{ee as default};