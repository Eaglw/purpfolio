{{- /* fingerprint */ -}}
{{- $fingerprint := .Scratch.Get "fingerprint" | default "md5" -}}

{{- /* critical style */ -}}
{{- $style := dict "Source" "bundled/css/critical.css" "Fingerprint" $fingerprint -}}
{{- $options := dict "enableSourceMap" false -}}
{{- $style = dict "Context" . "ToCSS" $options "Inline" true "Template" true | merge $style -}}
{{- partial "plugin/style.html" $style -}}

{{- $style := dict "Source" "bundled/css/main.css" "Fingerprint" $fingerprint "Defer" true -}}
{{- partial "plugin/style.html" $style -}}

{{- /* fuck safari */ -}}
<script>
  function z() {
    const r = document.querySelector(':root')
    r.style.setProperty('--window-height', `${window.innerHeight}px`)
  }
  z()
  window.addEventListener('resize', z, { passive: true })
</script>

{{- /* main js */ -}}
{{- $script := dict "Source" "bundled/js/main.js" "Fingerprint" $fingerprint "Defer" true "Esm" true -}}
{{- partial "plugin/script.html" $script -}}

{{- /* fonts */ -}}
<link
  rel="preload"
  href="{{- "lib/fonts/fw.woff2" | relURL -}}"
  as="font"
  crossorigin
/>
<link
  rel="preload"
  href="{{- "lib/fonts/GeistVF.woff2" | relURL -}}"
  as="font"
  crossorigin
/>
